참고: 모두의 네트워크 - 키즈구치 카츠야 저
위 책을 읽으며 공부한 내용을 정리한 포스트입니다.

---

# 네트워크의 규칙

## 프로토콜이란?

> **프로토콜**:
> 컴퓨터 간에 정보를 주고받을 때의 통신 방법에 대한 규칙이나 표준

외국어로 예를 들면, 불어를 못하는 한국인과 한국어를 못하는 프랑스인이라면 영어로 대화한다는 규칙을 정해서 대화할 수 있다.

편지 배송으로 예를 들면, 편지를 배송하기 위해서는 편지를 쓸 때부터 상대방에게 도착할 때까지 지켜야 하는 독립적인 여러 규칙을 거쳐야 한다.

- 편지 작성 -> 우체통에 넣기 -> 우편배달부가 편지 수거 -> 우체국 -> 편지 분류 -> 수신처에 가까운 우체국으로 편지 운송 -> 운송된 편지를 수신처의 우편함에 투입 -> 우편함에서 편지를 찾기 -> 편지 읽기

<br><br>

# OSI 모델과 TCP/IP 모델

## OSI 모델이란?

<br>

> **규격**:
> 기술적인 사항에 대해 제정한 기준을 말하는데, 보통은 기술적 표준을 의미한다.

<br>

표준 규격을 정하는 단체는 여러 곳이 있는데, 이 중 ISO라는 국제표준화기구가 **OSI 모델**이라는 표준 규격을 제정했다.

<br>

> **OSI 모델**(Open Standards Interconnection model):
>
> 국제표준화기구(ISO)가 1977년에 정의한 국제 통신 표준 규약이다.
> 네트워크의 기본 구조를 일곱 개 계층으로 나눠서 표준화한 통신 규약으로, 현재 다른 모든 통신 규약의 기반이 된다.

<br>

데이터의 송수신은 컴퓨터에서 컴퓨터로 데이터를 전송하는 것이다. 이때 컴퓨터 내부에서는 여러 가지 일을 하는데, 이런 일을 7개 계층으로 나눠서 수행한다.
그 7개 계층이 바로 OSI 모델이며, 계층이라는 용어 대신 **레이어**라는 용어를 사용하기도 한다.

<br>

### OSI 모델 각 계층의 역할

<br>

**응, 표, 세, 전, 네, 데, 물**
<br>

| 계층  |                         이름                          |                                     설명                                     |
| :---: | :---------------------------------------------------: | :--------------------------------------------------------------------------: |
| 7계층 | 응용 계층 <br> (Application Layer, 애플리케이션 계층) | 이메일 & 파일 전송. 웹 사이트 조회 등 애플리케이션에 대한 서비스를 제공한다. |
| 6계층 | 표현 계층 <br>(Presentaion Layer, 프레젠테이션 계층)  |               문자 코드, 암축, 암호화 등의 데이터를 변환한다.                |
| 5계층 |               세션 계층(Session Layer)                |                       세션 체결, 통신 방식을 결정한다.                       |
| 4계층 |   전송 계층 <br> (Transport Layer, 트랜스포트 계층)   |                       신뢰할 수 있는 통신을 구현한다.                        |
| 3계층 |             네트워크 계층(Network Layer)              |       다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정한다.       |
| 2계층 |           데이터 링크 계층(Data Link Layer)           |           네트워크 기기 간의 데이터 전송 및 물리 주소를 결정한다.            |
| 1계층 |               물리 계층(Physical Layer)               |          시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어한다.           |

<br>

## TCP/IP 모델이란?

<br>

OSI 모델은 7계층인데, 이를 4계층으로 바꿔서 생각해볼 수 있다.
이 4계층 모델을 **TCP/IP 모델**라고 한다.

<br>

> **TCP/IP** 모델(**T**ransmission **C**ontrol **P**rotocol / **I**nternet **P**rotocol model):
>
> OSI 모델 7계층의 네트워크에서 데이터를 전송하는 과정을 네 개 계층(Layer)으로 단순화시켜 사용하는 모델이다. 인터넷 모델이라고도 한다.
>
> 현재는 TCP/IP 모델을 사용하고 있다.

<br>

### OSI 모델과 TCP/IP 모델의 비교

<table>
    <thead>
        <tr>
            <th>OSI 모델</th>
            <th>TCP/IP 모델</th>
        </tr>
    </thead>
    <tbody style="text-align:center; font-weight:bold">
        <tr>
          <td>응용 계층</td>
          <td rowspan=3>응용 계층</td>
        </tr>
        <tr>
          	<td>표현 계층</td>
        </tr>
        <tr>
          	<td>세션 계층</td>
        </tr>
        <tr>	
          	<td>전송 계층</td>
            <td>전송 계층</td>
        </tr>
      <tr>
        <td>네트워크 계층</td>
        <td>인터넷 계층</td>
      </tr>
      <tr>
        <td>데이터 링크 계층</td>
        <td rowspan=2>네트워크 접속 계층</td>
      </tr>
      <tr><td>물리 계층</td></tr>
    </tbody>
</table>

<br><br>

# 캡슐화와 역캡슐화

## 캡슐화와 역캡슐화란?

<br>

데이터를 송수신할 때는 캡슐화와 역캡슐화라는 것이 이루어진다.

한 컴퓨터에서 다른 컴퓨터로 데이터를 보낼 때는 데이터의 앞부분에 전송하는 데 필요한 정보를 붙여서 다음 계층으로 보내야 한다.
이 정보를 **헤더**라고 하는데, 헤더에는 **데이터를 전달받을 상대방에 대한 정보**도 포함되어 있다.

<br>

> **헤더**(header):
> 저장되거나 전송되는 데이터의 맨 앞에 위치하는 추가적인 정보 데이터.
> 데이터의 내용이나 성격을 식별 또는 제어하는 데 사용한다.

<br>

이처럼 헤더를 붙여 나가는 걸 **캡슐화**라고 한다.
한편, 데이터를 받는 쪽에서는 헤더를 하나씩 제거해야 하는데, 이것을 **역캡슐화**라고 한다.

<br>

### 캡슐화와 역캡슐화 과정

|       계층       |                   데이터 상태                    |    데이터 송신 측     | 데이터 수신 측 |
| :--------------: | :----------------------------------------------: | :-------------------: | :------------: |
|    응용 계층     |                      데이터                      |                       |
|    전송 계층     |                  헤더 + 데이터                   |        캡슐화         |
|  네트워크 계층   |              헤더 + (헤더 + 데이터)              |        캡슐화         |
| 데이터 링크 계층 |     헤더 + (헤더 + 헤더 + 데이터) + 트레일러     |        캡슐화         |
|    물리 계층     |     (헤더 + 헤더 + 헤더 + 데이터 + 트레일러)     | 전기 신호로 전송된다. |
| 데이터 링크 계층 | ~~헤더~~ + (헤더 + 헤더 + 데이터) + ~~트레일러~~ |                       |    역캡슐화    |
|  네트워크 계층   |            ~~헤더~~ + (헤더 + 데이터)            |                       |    역캡슐화    |
|    전송 계층     |                ~~헤더~~ + 데이터                 |                       |    역캡슐화    |
|    응용 계층     |                      데이터                      |                       |

<br>

1. 송신 측 컴퓨터에서 웹 사이트에 접속하려고 하면 응용 계층에서는 웹 사이트를 접속하기 위한 요청 데이터가 만들어진다.
2. 해당 데이터는 전송 계층에 전달되는데, 전송 계층에서 신뢰할 수 있는 통신이 이루어지도록 응용 계층에서 만들어진 데이터에 **헤더**를 붙인다.
3. 전송 계층에서 만들어진 데이터를 다른 네트워크와 통신하기 위해 네트워크 계층에서 **헤더**를 붙인다
4. 네트워크 계층에서 만들어진 데이터에 물리적인 통신 채널을 연결하기 위해 데이터 링크 계층에서 **헤더**와 **트레일러**를 붙인다.

   > **트레일러**:
   > 데이터를 전달할 때 데이터의 마지막에 추가하는 정보

5. 데이터 링크 계층에서 만들어진 데이터는 최종적으로 **전기 신호**로 변환돼서 수신 측에 도착한다.

<br>

> 이처럼 데이터를 상대방에게 보낼 때 각 계층에서 헤더(&트레일러)를 붙여 나가는 것을 **캡슐화**라고 한다.

<br>

수신 측에서는 송신 측과 반대로, 각 계층의 **헤더**를 제거하면서 데이터를 전달한다. 데이터 링크 계층부터 순서대로 상위 계층으로 전달한다.

6. 송신 측의 데이터 링크 계층에서 추가된 **헤더**와 **트레일러**를 수신 측 데이터 링크 계층에서 제거한다.
7. 송신 측 네트워크 계층에서 추가된 **헤더**를 수신 측 네트워크 계층에서 제거한다.
8. 송신 측 전송 계층에서 추가된 **헤더**를 수신 측 전송 계층에서 제거한다.
9. 모든 헤더가 제거된 데이터가 수신 측 응용 계층까지 전달된다.

<br>

> 이처럼 데이터를 수신할 때 각 계층에서 헤더(&트레일러)를 제거해 나가는 것을 **역캡슐화**라고 한다.
